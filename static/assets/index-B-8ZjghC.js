(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();function k(){const e=document.querySelector(".scroll-progress");if(!e)return;const t=document.documentElement.scrollHeight-document.documentElement.clientHeight,o=window.scrollY/t*100;e.style.width=o+"%"}window.addEventListener("scroll",k);const p=document.getElementById("navbar"),u=document.querySelector(".hamburger"),i=document.querySelector(".nav-menu"),$=document.querySelectorAll(".nav-link");window.addEventListener("scroll",()=>{window.scrollY>100?p.classList.add("scrolled"):p.classList.remove("scrolled")});u.addEventListener("click",()=>{i.classList.toggle("active");const e=u.querySelectorAll("span");e[0].style.transform=i.classList.contains("active")?"rotate(45deg) translate(5px, 5px)":"none",e[1].style.opacity=i.classList.contains("active")?"0":"1",e[2].style.transform=i.classList.contains("active")?"rotate(-45deg) translate(7px, -6px)":"none"});$.forEach(e=>{e.addEventListener("click",()=>{i.classList.remove("active");const t=u.querySelectorAll("span");t[0].style.transform="none",t[1].style.opacity="1",t[2].style.transform="none"})});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=document.querySelector(this.getAttribute("href"));if(o){const s=o.offsetTop-70;window.scrollTo({top:s,behavior:"smooth"})}})});const y=document.getElementById("trailerBtn"),l=document.getElementById("trailerModal"),h=document.getElementById("closeModal"),w=document.getElementById("trailerIframe");y&&y.addEventListener("click",()=>{l.classList.add("active"),w.src="https://www.youtube.com/embed/n9GfUxoxP8M?autoplay=1",document.body.style.overflow="hidden"});h&&h.addEventListener("click",()=>{m()});l&&l.addEventListener("click",e=>{e.target===l&&m()});document.addEventListener("keydown",e=>{e.key==="Escape"&&m()});function m(){l.classList.remove("active"),w.src="",document.body.style.overflow="auto"}const v=document.querySelectorAll(".character-icon"),d=document.getElementById("characterDisplay"),A={1:"/assets/images/character-main-full.webp",2:"/assets/images/character-ai-full.webp",3:"/assets/images/character-friend-full.webp"};function f(e){const t=window.i18n?window.i18n.t(`characters.data.${e}`):null;if(!t||typeof t!="object"){console.warn(`Character data not found for ID: ${e}`);return}const o=A[e],s=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='600'%3E%3Crect fill='%23334155' width='400' height='600'/%3E%3Ctext fill='%2394a3b8' font-family='sans-serif' font-size='24' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3E${t.name}%3C/text%3E%3C/svg%3E`;d.innerHTML=`
        <div class="character-detail-content">
            <div class="character-detail-image">
                <img src="${o}" alt="${t.name}" onerror="this.src='${s}'">
            </div>
            <div class="character-detail-info">
                <h3>${t.name}</h3>
                <p class="role">${t.role}</p>
                <p>${t.description}</p>
            </div>
        </div>
    `,d.style.opacity="0",setTimeout(()=>{d.style.opacity="1"},10)}function M(){document.querySelectorAll("[data-character-name]").forEach(t=>{const o=t.getAttribute("data-character-name"),s=window.i18n?window.i18n.t(`characters.data.${o}.name`):null;s&&(t.textContent=s)})}v.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-character");v.forEach(o=>o.classList.remove("active")),e.classList.add("active"),f(t)})});d&&f("1");const E=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.classList.add("animate-in"),E.unobserve(t.target))})},{threshold:.25,rootMargin:"0px 0px -150px 0px"}),x=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)",t.target.style.filter="blur(0px)",x.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px 50px 0px"}),L=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)",L.unobserve(t.target))})},{threshold:.15,rootMargin:"0px 0px -80px 0px"}),O=document.querySelectorAll(".feature-block"),Y=document.querySelectorAll(".section-title, .character-icon, .mod-feature, .gallery-item, .social-link"),z=document.querySelectorAll(".overview-concept, .overview-release");O.forEach(e=>{E.observe(e)});Y.forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(50px)",e.style.filter="blur(5px)",e.style.transition=`opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1) ${t*.05}s, transform 0.8s cubic-bezier(0.16, 1, 0.3, 1) ${t*.05}s, filter 0.8s cubic-bezier(0.16, 1, 0.3, 1) ${t*.05}s`,x.observe(e)});z.forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(50px)",e.style.transition=`opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1) ${t*.1}s, transform 0.8s cubic-bezier(0.16, 1, 0.3, 1) ${t*.1}s`,L.observe(e)});window.addEventListener("scroll",()=>{const e=window.scrollY,t=document.querySelector(".hero-background");t&&(t.style.transform=`translateY(${e*.5}px)`)});function g(){document.querySelectorAll(".gallery-item").forEach(t=>{t.style.cursor="pointer",t.addEventListener("click",function(o){o.preventDefault(),o.stopPropagation();const s=this.querySelector("img");if(!s)return;const r=document.createElement("div");r.className="modal active",r.style.zIndex="9999",r.innerHTML=`
                <div class="modal-content">
                    <button class="modal-close">&times;</button>
                    <img src="${s.src}" alt="${s.alt}" style="width: 100%; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);">
                </div>
            `,document.body.appendChild(r),document.body.style.overflow="hidden",r.querySelector(".modal-close").addEventListener("click",()=>{r.remove(),document.body.style.overflow="auto"}),r.addEventListener("click",a=>{a.target===r&&(r.remove(),document.body.style.overflow="auto")});const c=a=>{a.key==="Escape"&&(r.remove(),document.body.style.overflow="auto",document.removeEventListener("keydown",c))};document.addEventListener("keydown",c)})})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();const S=document.createElement("style");S.textContent=`
    @keyframes fadeInChar {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
`;document.head.appendChild(S);const I=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting&&t.target.children.length===0){const o=t.target,s=o.textContent;o.textContent="",s.split("").forEach((n,c)=>{const a=document.createElement("span");a.textContent=n,a.style.display="inline-block",a.style.opacity="0",a.style.animation=`fadeInChar 0.5s cubic-bezier(0.16, 1, 0.3, 1) ${c*.03}s forwards`,o.appendChild(a)}),I.unobserve(t.target)}})},{threshold:.8,rootMargin:"0px 0px -100px 0px"});document.querySelectorAll(".section-title").forEach(e=>{I.observe(e)});const b=document.querySelector(".scroll-indicator");b&&b.addEventListener("click",()=>{const e=document.querySelector(".video-section");e&&e.scrollIntoView({behavior:"smooth"})});if("loading"in HTMLImageElement.prototype)document.querySelectorAll('img[loading="lazy"]').forEach(t=>{t.dataset.src&&(t.src=t.dataset.src)});else{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js",document.body.appendChild(e)}window.addEventListener("load",()=>{document.body.style.opacity="1";const e=document.querySelector(".hero-content");e&&(e.style.animation="heroFadeIn 1.2s cubic-bezier(0.16, 1, 0.3, 1)")});document.body.style.opacity="0";document.body.style.transition="opacity 0.5s ease";document.querySelectorAll(".btn").forEach(e=>{e.addEventListener("click",function(t){const o=document.createElement("span"),s=this.getBoundingClientRect(),r=Math.max(s.width,s.height),n=t.clientX-s.left-r/2,c=t.clientY-s.top-r/2;o.style.width=o.style.height=r+"px",o.style.left=n+"px",o.style.top=c+"px",o.style.position="absolute",o.style.borderRadius="50%",o.style.background="rgba(255, 255, 255, 0.5)",o.style.transform="scale(0)",o.style.animation="ripple 0.6s ease-out",o.style.pointerEvents="none",this.appendChild(o),setTimeout(()=>o.remove(),600)})});const C=document.createElement("style");C.textContent=`
    @keyframes ripple {
        to {
            transform: scale(2);
            opacity: 0;
        }
    }
`;document.head.appendChild(C);document.querySelectorAll(".feature-image, .character-detail-image").forEach(e=>{e.addEventListener("mousemove",t=>{const o=e.getBoundingClientRect(),s=t.clientX-o.left,r=t.clientY-o.top,n=o.width/2,c=o.height/2,a=(r-c)/20,q=(n-s)/20;e.style.transform=`perspective(1000px) rotateX(${a}deg) rotateY(${q}deg) scale(1.05)`}),e.addEventListener("mouseleave",()=>{e.style.transform=""})});window.displayCharacter=f;window.updateCharacterNames=M;
